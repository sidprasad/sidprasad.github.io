<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>Zoomable Image</title>
    <style>
        #svg-container {
            width: 100%;
            overflow: hidden;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #zoomable-image {
            width: 100%;
            height: auto;
        }

        .svg-border {
            border: 2px solid black;
        }
    </style>
    <!-- Include D3.js library -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
</head>

<body>

    <div class="container">


        <div class="container-fluid" id="svg-container">
            <svg id="diagram" width="800" height="800" class="svg-border">
                <g class="zoomable">

                        <g
                            transform="matrix(0.3615790563120355,0,0,0.3615790563120355,-124.72584998554453,40.12878068022457)">
                            <g id="">
                                <defs>
                                    <marker id="arrow-10-[#333]" viewBox="0 0 10 10" refX="0" refY="5" markerWidth="10"
                                        markerHeight="10" markerUnits="userSpaceOnUse" orient="auto" fill="#333">
                                        <path d="M 0 0 L 10 5 L 0 10 z"></path>
                                    </marker>
                                </defs>
                                <g class="nodes">
                                    <g id="Pear0" transform="translate(200 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear0</text>
                                    </g>
                                    <g id="Pear1" transform="translate(-1400 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear1</text>
                                    </g>
                                    <g id="Pear2" transform="translate(0 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear2</text>
                                    </g>
                                    <g id="Pear3" transform="translate(-200 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear3</text>
                                    </g>
                                    <g id="Pear4" transform="translate(-400 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear4</text>
                                    </g>
                                    <g id="Pear5" transform="translate(-600 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(55, 241, 4); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Pear5</text>
                                    </g>
                                    <g id="Fresh0" transform="translate(400 160)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Fresh0</text>
                                    </g>
                                    <g id="Apple0" transform="translate(-800 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(250, 0, 0); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Apple0</text>
                                    </g>
                                    <g id="Rotten0" transform="translate(-1100 160)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Rotten0</text>
                                    </g>
                                    <g id="Basket0" transform="translate(400 -160)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(185, 177, 177); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Basket0</text>
                                    </g>
                                    <g id="Basket1" transform="translate(-500 -160)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(185, 177, 177); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Basket1</text>
                                    </g>
                                    <g id="Basket2" transform="translate(888.9374123578991 -132.3435308947478)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(185, 177, 177); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Basket2</text>
                                    </g>
                                    <g id="Banana0" transform="translate(1400 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana0</text>
                                    </g>
                                    <g id="Banana1" transform="translate(1200 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana1</text>
                                    </g>
                                    <g id="Banana2" transform="translate(1000 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana2</text>
                                    </g>
                                    <g id="Banana3" transform="translate(800 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana3</text>
                                    </g>
                                    <g id="Banana4" transform="translate(600 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana4</text>
                                    </g>
                                    <g id="Banana5" transform="translate(-1000 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana5</text>
                                    </g>
                                    <g id="Banana6" transform="translate(-1200 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana6</text>
                                    </g>
                                    <g id="Banana7" transform="translate(400 0)">
                                        <rect x="-50" y="-30" width="100" height="60"
                                            style="stroke: rgb(151, 160, 13); stroke-width: 1; fill: rgb(255, 255, 255);">
                                        </rect><text x="0" y="0" dy="0.33em"
                                            style="font-family: monospace; font-size: 14px; text-anchor: middle; user-select: none; fill: rgb(51, 51, 51);">Banana7</text>
                                    </g>
                                </g>
                                <g class="edges">
                                    <g id="Basket<:fruit:Basket0->Banana6">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M350,-157.49999999999997L91.66666666666667,-144.58333333333331C-166.66666666666666,-131.66666666666666,-683.3333333333334,-105.83333333333333,-941.6560668945312,-86.24965222676595C-1199.9788004557292,-66.66597112019856,-1199.9576009114583,-53.33194224039713,-1199.947001139323,-46.66492780049642L-1199.9364013671875,-39.9979133605957">
                                        </path>
                                        <path
                                            d="M350,-157.49999999999997L91.66666666666667,-144.58333333333331C-166.66666666666666,-131.66666666666666,-683.3333333333334,-105.83333333333333,-941.6666666666666,-84.58333333333333C-1200,-63.333333333333336,-1200,-46.666666666666664,-1200,-38.333333333333336L-1200,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-433.7156066894531" y="-117.22268676757812" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket0->Banana7">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M400,-130L400,-121.66666666666667C400,-113.33333333333333,400,-96.66666666666667,400,-81.66666730244954C400,-66.66666793823242,400,-53.333335876464844,400,-46.666669845581055L400,-40.000003814697266">
                                        </path>
                                        <path
                                            d="M400,-130L400,-121.66666666666667C400,-113.33333333333333,400,-96.66666666666667,400,-80C400,-63.333333333333336,400,-46.666666666666664,400,-38.333333333333336L400,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text x="400"
                                            y="-80" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Banana5">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-550,-152L-625,-140C-700,-128,-850,-104,-924.9969075520834,-85.33330345153809C-999.9938151041666,-66.66660690307617,-999.9876302083334,-53.333213806152344,-999.9845377604166,-46.66651725769043L-999.9814453125,-39.999820709228516">
                                        </path>
                                        <path
                                            d="M-550,-152L-625,-140C-700,-128,-850,-104,-925,-83.66666666666667C-1000,-63.333333333333336,-1000,-46.666666666666664,-1000,-38.333333333333336L-1000,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-787.95166015625" y="-112.6263198852539" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Pear1">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-550,-155.55555555555554L-691.6666666666666,-142.96296296296296C-833.3333333333334,-130.37037037037035,-1116.6666666666667,-105.18518518518518,-1258.3274943033855,-85.925821657534C-1399.9883219401042,-66.66645812988281,-1399.9766438802083,-53.332916259765625,-1399.9708048502605,-46.66614532470703L-1399.9649658203125,-39.99937438964844">
                                        </path>
                                        <path
                                            d="M-550,-155.55555555555554L-691.6666666666666,-142.96296296296296C-833.3333333333334,-130.37037037037035,-1116.6666666666667,-105.18518518518518,-1258.3333333333333,-84.25925925925925C-1400,-63.333333333333336,-1400,-46.666666666666664,-1400,-38.333333333333336L-1400,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-985.5460815429688" y="-115.68865203857422" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Pear2">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-450,-152L-375,-140C-300,-128,-150,-104,-75.0030931038782,-85.33330345153809C-0.006186207756400108,-66.66660690307617,-0.012372415512800217,-53.333213806152344,-0.01546551939100027,-46.66651725769043L-0.018558623269200325,-39.999820709228516">
                                        </path>
                                        <path
                                            d="M-450,-152L-375,-140C-300,-128,-150,-104,-75,-83.66666666666667C-4.736951571734001e-15,-63.333333333333336,-9.473903143468002e-15,-46.666666666666664,-1.1842378929335004e-14,-38.333333333333336L-1.4210854715202004e-14,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-212.0483856201172" y="-112.62632751464844" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Pear3">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-450,-146.66666666666669L-408.3333333333333,-135.55555555555557C-366.6666666666667,-124.44444444444446,-283.3333333333333,-102.22222222222223,-241.66838836669922,-84.44443045722115C-200.0034434000651,-66.66663869222005,-200.00688680013022,-53.3332773844401,-200.00860850016275,-46.66659673055013L-200.0103302001953,-39.999916076660156">
                                        </path>
                                        <path
                                            d="M-450,-146.66666666666669L-408.3333333333333,-135.55555555555557C-366.6666666666667,-124.44444444444446,-283.3333333333333,-102.22222222222223,-241.66666666666666,-82.77777777777779C-200,-63.333333333333336,-200,-46.666666666666664,-200,-38.333333333333336L-200,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-309.7996520996094" y="-107.64234161376953" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Pear4">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-462.5,-130L-452.0833333333333,-121.66666666666667C-441.6666666666667,-113.33333333333333,-420.8333333333333,-96.66666666666667,-410.41709899902344,-81.6666653951009C-400.00086466471356,-66.66666412353516,-400.00172932942706,-53.33332824707031,-400.0021616617839,-46.66666030883789L-400.0025939941406,-39.99999237060547">
                                        </path>
                                        <path
                                            d="M-462.5,-130L-452.0833333333333,-121.66666666666667C-441.6666666666667,-113.33333333333333,-420.8333333333333,-96.66666666666667,-410.4166666666667,-80C-400,-63.333333333333336,-400,-46.666666666666664,-400,-38.333333333333336L-400,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-416.44512939453125" y="-88.35423278808594" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket1->Pear5">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-537.5,-130L-547.9166666666666,-121.66666666666667C-558.3333333333334,-113.33333333333333,-579.1666666666666,-96.66666666666667,-589.5828959147135,-81.6666653951009C-599.9991251627604,-66.66666412353516,-599.9982503255209,-53.33332824707031,-599.997812906901,-46.66666030883789L-599.9973754882812,-39.99999237060547">
                                        </path>
                                        <path
                                            d="M-537.5,-130L-547.9166666666666,-121.66666666666667C-558.3333333333334,-113.33333333333333,-579.1666666666666,-96.66666666666667,-589.5833333333334,-80C-600,-63.333333333333336,-600,-46.666666666666664,-600,-38.333333333333336L-600,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-583.5548706054688" y="-88.35423278808594" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Banana0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M938.9374123578991,-127.22248191166275L1015.781176964916,-119.35206825971896C1092.6249415719328,-111.48165460777517,1246.3124707859663,-95.74082730388757,1323.1530615648583,-81.20371201721885C1399.99365234375,-66.66659673055013,1399.9873046875,-53.33319346110026,1399.984130859375,-46.66649182637533L1399.98095703125,-39.99979019165039">
                                        </path>
                                        <path
                                            d="M938.9374123578991,-127.22248191166275L1015.781176964916,-119.35206825971896C1092.6249415719328,-111.48165460777517,1246.3124707859663,-95.74082730388757,1323.1562353929833,-79.53708031861045C1400,-63.333333333333336,1400,-46.666666666666664,1400,-38.333333333333336L1400,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="1181.7044677734375" y="-101.07748413085938" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Banana1">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M938.9374123578991,-123.92986545019542L982.4478436315826,-116.60822120849618C1025.958274905266,-109.28657696679694,1112.979137452633,-94.64328848339846,1156.487758016681,-80.65496613094076C1199.9963785807292,-66.66664377848308,1199.9927571614583,-53.33328755696615,1199.990946451823,-46.66660944620768L1199.9891357421875,-39.99993133544922">
                                        </path>
                                        <path
                                            d="M938.9374123578991,-123.92986545019542L982.4478436315826,-116.60822120849618C1025.958274905266,-109.28657696679694,1112.979137452633,-94.64328848339846,1156.4895687263165,-78.9883109083659C1200,-63.333333333333336,1200,-46.666666666666664,1200,-38.333333333333336L1200,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="1083.9034423828125" y="-97.96002960205078" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Banana2">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M938.9374123578991,-108.77865094461339L949.1145102982492,-103.98220912051117C959.2916082385995,-99.18576729640893,979.6458041192997,-89.59288364820446,989.8224748135561,-78.12977388586981C999.9991455078125,-66.66666412353516,999.998291015625,-53.33332824707031,999.9978637695312,-46.66666030883789L999.9974365234375,-39.99999237060547">
                                        </path>
                                        <path
                                            d="M938.9374123578991,-108.77865094461339L949.1145102982492,-103.98220912051117C959.2916082385995,-99.18576729640893,979.6458041192997,-89.59288364820446,989.8229020596499,-76.4631084907689C1000,-63.333333333333336,1000,-46.666666666666664,1000,-38.333333333333336L1000,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="985.7579345703125" y="-81.03118896484375" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Banana3">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M838.9374123578991,-102.91635873681011L832.4478436315826,-99.09696561400843C825.9582749052661,-95.27757249120674,812.979137452633,-87.63878624560338,806.4898433845196,-77.15272582035215C800.0005493164062,-66.6666653951009,800.0010986328125,-53.33333079020182,800.0013732910156,-46.66666348775228L800.0016479492188,-39.999996185302734">
                                        </path>
                                        <path
                                            d="M838.9374123578991,-102.91635873681011L832.4478436315826,-99.09696561400843C825.9582749052661,-95.27757249120674,812.979137452633,-87.63878624560338,806.4895687263165,-75.48605978946836C800,-63.333333333333336,800,-46.666666666666664,800,-38.333333333333336L800,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="805.735107421875" y="-73.99292755126953" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Banana4">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M838.9374123578991,-123.28559504843528L799.1145102982492,-116.07132920702941C759.2916082385995,-108.85706336562352,679.6458041192997,-94.42853168281177,639.8245500088686,-80.54758900221317C600.0032958984375,-66.66664632161458,600.006591796875,-53.333292643229164,600.0082397460938,-46.66661580403646L600.0098876953125,-39.99993896484375">
                                        </path>
                                        <path
                                            d="M838.9374123578991,-123.28559504843528L799.1145102982492,-116.07132920702941C759.2916082385995,-108.85706336562352,679.6458041192997,-94.42853168281177,639.8229020596499,-78.88093250807255C600,-63.333333333333336,600,-46.666666666666664,600,-38.333333333333336L600,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="704.7017822265625" y="-97.31848907470703" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Basket<:fruit:Basket2->Pear0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M838.9374123578991,-128.54467123378083L732.4478436315826,-120.45389269481736C625.9582749052661,-112.36311415585389,412.97913745263304,-96.18155707792694,306.49396580069805,-81.4240495655748C200.00879414876303,-66.66654205322266,200.01758829752603,-53.33308410644531,200.02198537190756,-46.66635513305664L200.02638244628906,-39.99962615966797">
                                        </path>
                                        <path
                                            d="M838.9374123578991,-128.54467123378083L732.4478436315826,-120.45389269481736C625.9582749052661,-112.36311415585389,412.97913745263304,-96.18155707792694,306.4895687263165,-79.75744520563013C200,-63.333333333333336,200,-46.666666666666664,200,-38.333333333333336L200,-30"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="508.4237365722656" y="-102.23819732666016" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">fruit</text>
                                    </g>
                                    <g id="Fruit<:status:Apple0->Rotten0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-800,30L-800,38.333333333333336C-800,46.666666666666664,-800,63.333333333333336,-840.0562744140625,82.3483403523763C-880.112548828125,101.36334737141927,-960.22509765625,122.72669474283855,-1000.2813720703125,133.4083684285482L-1040.337646484375,144.0900421142578">
                                        </path>
                                        <path
                                            d="M-800,30L-800,38.333333333333336C-800,46.666666666666664,-800,63.333333333333336,-841.6666666666666,82.77777777777779C-883.3333333333334,102.22222222222223,-966.6666666666666,124.44444444444446,-1008.3333333333334,135.55555555555557L-1050,146.66666666666669"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-909.7996215820312" y="107.64231872558594" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana0->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M1400,30L1400,38.333333333333336C1400,46.666666666666664,1400,63.333333333333336,1243.3280232747395,84.20042419433594C1086.6560465494792,105.06751505533855,773.3120930989584,130.1350301106771,616.6401163736979,142.66878763834634L459.9681396484375,155.20254516601562">
                                        </path>
                                        <path
                                            d="M1400,30L1400,38.333333333333336C1400,46.666666666666664,1400,63.333333333333336,1241.6666666666667,84.33333333333333C1083.3333333333333,105.33333333333333,766.6666666666666,130.66666666666666,608.3333333333334,143.33333333333331L450,155.99999999999997"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="935.1701049804688" y="116.0497817993164" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana1->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M1200,30L1200,38.333333333333336C1200,46.666666666666664,1200,63.333333333333336,1076.6583964029949,84.00082651774089C953.3167928059896,104.66831970214844,706.6335856119791,129.33663940429688,583.291982014974,141.6707992553711L459.95037841796875,154.0049591064453">
                                        </path>
                                        <path
                                            d="M1200,30L1200,38.333333333333336C1200,46.666666666666664,1200,63.333333333333336,1075,84.16666666666667C950,105,700,130,575,142.5L450,155"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="835.988037109375" y="115.2295913696289" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana2->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M1000,30L1000,38.333333333333336C1000,46.666666666666664,1000,63.333333333333336,909.9853820800781,83.66861470540364C819.9707641601562,104.00389607747395,639.9415283203125,128.0077921549479,549.9269104003906,140.0097401936849L459.91229248046875,152.01168823242188">
                                        </path>
                                        <path
                                            d="M1000,30L1000,38.333333333333336C1000,46.666666666666664,1000,63.333333333333336,908.3333333333334,83.88888888888889C816.6666666666666,104.44444444444444,633.3333333333334,128.88888888888889,541.6666666666666,141.1111111111111L450,153.33333333333331"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="737.1571044921875" y="113.8083724975586" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana3->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M800,30L800,38.333333333333336C800,46.666666666666664,800,63.333333333333336,743.3009694417318,83.00647226969402C686.6019388834635,102.67961120605469,573.2038777669271,125.35922241210938,516.5048472086588,136.69902801513672L459.8058166503906,148.03883361816406">
                                        </path>
                                        <path
                                            d="M800,30L800,38.333333333333336C800,46.666666666666664,800,63.333333333333336,741.6666666666666,83.33333333333333C683.3333333333334,103.33333333333333,566.6666666666666,126.66666666666667,508.3333333333333,138.33333333333334L450,150"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="638.952392578125" y="110.79774475097656" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana4->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M600,30L600,38.333333333333336C600,46.666666666666664,600,63.333333333333336,576.5474599202474,81.0476811726888C553.0949198404948,98.76202901204427,506.18983968098956,117.52405802408855,482.737299601237,126.90507253011067L459.2847595214844,136.2860870361328">
                                        </path>
                                        <path
                                            d="M600,30L600,38.333333333333336C600,46.666666666666664,600,63.333333333333336,575,81.66666666666667C550,100,500,120,475,130L450,140"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="541.4782104492188" y="101.14208984375" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana5->Rotten0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-1000,30L-1000,38.333333333333336C-1000,46.666666666666664,-1000,63.333333333333336,-1009.1152140299479,78.9588394165039C-1018.2304280598959,94.58434549967448,-1036.4608561197917,109.16869099934895,-1045.5760701497395,116.4608637491862L-1054.6912841796875,123.75303649902344">
                                        </path>
                                        <path
                                            d="M-1000,30L-1000,38.333333333333336C-1000,46.666666666666664,-1000,63.333333333333336,-1010.4166666666666,80C-1020.8333333333334,96.66666666666667,-1041.6666666666667,113.33333333333333,-1052.0833333333333,121.66666666666667L-1062.5,130"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-1016.4451293945312" y="88.35424041748047" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana6->Rotten0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-1200,30L-1200,38.333333333333336C-1200,46.666666666666664,-1200,63.333333333333336,-1190.884785970052,78.9588394165039C-1181.7695719401042,94.58434549967448,-1163.5391438802083,109.16869099934895,-1154.4239298502605,116.4608637491862L-1145.3087158203125,123.75303649902344">
                                        </path>
                                        <path
                                            d="M-1200,30L-1200,38.333333333333336C-1200,46.666666666666664,-1200,63.333333333333336,-1189.5833333333333,80C-1179.1666666666667,96.66666666666667,-1158.3333333333333,113.33333333333333,-1147.9166666666667,121.66666666666667L-1137.5,130"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-1183.5548095703125" y="88.3542251586914" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Banana7->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M400,30L400,38.333333333333336C400,46.666666666666664,400,63.333333333333336,400,78.33333333333333C400,93.33333333333333,400,106.66666666666667,400,113.33333333333333L400,120">
                                        </path>
                                        <path
                                            d="M400,30L400,38.333333333333336C400,46.666666666666664,400,63.333333333333336,400,80C400,96.66666666666667,400,113.33333333333333,400,121.66666666666667L400,130"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text x="400"
                                            y="80" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear0->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M200,30L200,38.333333333333336C200,46.666666666666664,200,63.333333333333336,223.4525400797526,81.0476811726888C246.90508015950522,98.76202901204427,293.81016031901044,117.52405802408855,317.262700398763,126.90507253011067L340.7152404785156,136.2860870361328">
                                        </path>
                                        <path
                                            d="M200,30L200,38.333333333333336C200,46.666666666666664,200,63.333333333333336,225,81.66666666666667C250,100,300,120,325,130L350,140"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="258.52178955078125" y="101.14209747314453" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear1->Rotten0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-1400,30L-1400,38.333333333333336C-1400,46.666666666666664,-1400,63.333333333333336,-1359.9437255859375,82.3483403523763C-1319.887451171875,101.36334737141927,-1239.77490234375,122.72669474283855,-1199.7186279296875,133.4083684285482L-1159.662353515625,144.0900421142578">
                                        </path>
                                        <path
                                            d="M-1400,30L-1400,38.333333333333336C-1400,46.666666666666664,-1400,63.333333333333336,-1358.3333333333333,82.77777777777779C-1316.6666666666667,102.22222222222223,-1233.3333333333333,124.44444444444446,-1191.6666666666667,135.55555555555557L-1150,146.66666666666669"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-1290.200439453125" y="107.64232635498047" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear2->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M0,30L0,38.333333333333336C0,46.666666666666664,0,63.333333333333336,56.69903055826823,83.00647226969402C113.39806111653645,102.67961120605469,226.7961222330729,125.35922241210938,283.4951527913411,136.69902801513672L340.1941833496094,148.03883361816406">
                                        </path>
                                        <path
                                            d="M0,30L0,38.333333333333336C0,46.666666666666664,0,63.333333333333336,58.333333333333336,83.33333333333333C116.66666666666667,103.33333333333333,233.33333333333334,126.66666666666667,291.6666666666667,138.33333333333334L350,150"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="161.04769897460938" y="110.79774475097656" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear3->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-200,30L-200,38.333333333333336C-200,46.666666666666664,-200,63.333333333333336,-109.98538208007812,83.66861470540364C-19.97076416015625,104.00389607747395,160.0584716796875,128.0077921549479,250.07308959960938,140.0097401936849L340.08770751953125,152.01168823242188">
                                        </path>
                                        <path
                                            d="M-200,30L-200,38.333333333333336C-200,46.666666666666664,-200,63.333333333333336,-108.33333333333333,83.88888888888889C-16.666666666666668,104.44444444444444,166.66666666666666,128.88888888888889,258.3333333333333,141.1111111111111L350,153.33333333333331"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="62.842891693115234" y="113.8083724975586" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear4->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-400,30L-400,38.333333333333336C-400,46.666666666666664,-400,63.333333333333336,-276.6583964029948,84.00082651774089C-153.3167928059896,104.66831970214844,93.36641438802083,129.33663940429688,216.70801798502603,141.6707992553711L340.04962158203125,154.0049591064453">
                                        </path>
                                        <path
                                            d="M-400,30L-400,38.333333333333336C-400,46.666666666666664,-400,63.333333333333336,-275,84.16666666666667C-150,105,100,130,225,142.5L350,155"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-35.98817443847656" y="115.23196411132812" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                    <g id="Fruit<:status:Pear5->Fresh0">
                                        <path marker-end="url(#arrow-10-[#333])"
                                            style="stroke: rgb(51, 51, 51); stroke-width: 1; fill: none;"
                                            d="M-600,30L-600,38.333333333333336C-600,46.666666666666664,-600,63.333333333333336,-443.32802327473956,84.20042419433594C-286.6560465494792,105.06751505533855,26.687906901041668,130.1350301106771,183.3598836263021,142.66878763834634L340.0318603515625,155.20254516601562">
                                        </path>
                                        <path
                                            d="M-600,30L-600,38.333333333333336C-600,46.666666666666664,-600,63.333333333333336,-441.6666666666667,84.33333333333333C-283.3333333333333,105.33333333333333,33.333333333333336,130.66666666666666,191.66666666666666,143.33333333333334L350,156"
                                            stroke="transparent" stroke-width="11" fill="none"></path><text
                                            x="-135.17044067382812" y="116.05265808105469" dy="0.33em"
                                            style="font-family: monospace; font-size: 12px; text-anchor: middle; user-select: none;">status</text>
                                    </g>
                                </g>
                            </g>
                        </g>

                </g>
            </svg>
        </div>
    </div>
    <script>
        // Add zoom behavior
        const zoom = d3.zoom()
            .scaleExtent([0.1, 10]) // Set the zoom scale extent
            .on('zoom', zoomed);

        function zoomed(event) {
            d3.select('.zoomable').attr('transform', event.transform);
        }
        const diagram = d3.select('#diagram');
        diagram.call(zoom);


        // Select all nodes and make them draggable
        const nodes = d3.selectAll('.nodes g');

        function getNodePositions() {
            const positions = {};
            nodes.each(function () {
                const node = d3.select(this);
                const transform = node.attr('transform');
                const translate = transform.match(/translate\(([^, ]+)[, ]+([^)]+)\)/);
                if (translate) {
                    const x = parseFloat(translate[1]);
                    const y = parseFloat(translate[2]);
                    positions[node.attr('id')] = { x, y };
                }
            });
            console.log(positions);
            return positions;
        }

        // Store the initial positions of the nodes
        const nodePositions = getNodePositions();

        function getEdgeSourceAndTarget(edgeId) {
            // First find the id of the last : character and get the substring after it
            const byParts = edgeId.split(':');
            let rel = byParts[byParts.length - 1];

            const [sourceId, targetId] = rel.split('->');
            return { sourceId, targetId };
        }

        function updatePath(path, startX, startY, endX, endY) {
            const controlPoint1 = `${(startX + endX) / 2},${startY}`;
            const controlPoint2 = `${(startX + endX) / 2},${endY}`;
            const newD = `M${startX},${startY} C${controlPoint1},${controlPoint2},${endX},${endY}`;
            path.attr('d', newD);
        }

        function getIntersectionPoint(node, targetNode) {
            const dx = targetNode.x - node.x;
            const dy = targetNode.y - node.y;
            const absDx = Math.abs(dx);
            const absDy = Math.abs(dy);

            let x = node.x;
            let y = node.y;

            const halfWidth = 50;
            const halfHeight = 30;

            if (absDx > absDy) {
                x += dx > 0 ? halfWidth : -halfWidth;
                y += dy * (halfWidth / absDx);
            } else {
                x += dx * (halfHeight / absDy);
                y += dy > 0 ? halfHeight : -halfHeight;
            }

            return { x, y };
        }

        function updateEdges(nodeId) {
            const node = nodePositions[nodeId];
            // Update edges where the node is the source
            d3.selectAll(`g[id*=":${nodeId}->"]`).each(function () {
                const edge = d3.select(this);
                const edgeId = edge.attr('id');

                const { sourceId, targetId } = getEdgeSourceAndTarget(edgeId);
                //assert (sourceId === nodeId);

                const targetNode = nodePositions[targetId];
                const sourceIntersection = getIntersectionPoint(node, targetNode);
                const targetIntersection = getIntersectionPoint(targetNode, node);
                edge.select('path').each(function () {
                    updatePath(d3.select(this), sourceIntersection.x, sourceIntersection.y, targetIntersection.x, targetIntersection.y);
                });

                // Update the position of the label
                edge.select('text').attr('x', (sourceIntersection.x + targetIntersection.x) / 2)
                    .attr('y', (sourceIntersection.y + targetIntersection.y) / 2);
            });

            // Update edges where the node is the target
            d3.selectAll(`g[id*="->${nodeId}"]`).each(function () {
                const edge = d3.select(this);
                const edgeId = edge.attr('id');

                const { sourceId, targetId } = getEdgeSourceAndTarget(edgeId);
                //assert (targetId === nodeId);

                const sourceNode = nodePositions[sourceId];
                const sourceIntersection = getIntersectionPoint(sourceNode, node);
                const targetIntersection = getIntersectionPoint(node, sourceNode);
                edge.select('path').each(function () {
                    updatePath(d3.select(this), sourceIntersection.x, sourceIntersection.y, targetIntersection.x, targetIntersection.y);
                });

                // Update the position of the label
                edge.select('text').attr('x', (sourceIntersection.x + targetIntersection.x) / 2)
                    .attr('y', (sourceIntersection.y + targetIntersection.y) / 2);
            });
        }

        nodes
            .call(d3.drag()
                .on('start', dragStarted)
                .on('drag', dragged)
                .on('end', dragEnded));

        function dragStarted(event, d) {
            d3.select(this).raise().attr('stroke', 'black');
        }

        function dragged(event, d) {
            const nodeId = d3.select(this).attr('id');
            nodePositions[nodeId].x = event.x;
            nodePositions[nodeId].y = event.y;
            d3.select(this).attr('transform', `translate(${event.x}, ${event.y})`);
            updateEdges(nodeId); // Update the edges during the drag event
        }

        function dragEnded(event, d) {
            d3.select(this).attr('stroke', null);
        }



        /**** This bit ensures we zoom to fit ***/
        const bbox = d3.select('.zoomable').node().getBBox();
        const padding = 10; // Padding in pixels

        const viewBox = [
            bbox.x - padding,
            bbox.y - padding,
            bbox.width + 2 * padding,
            bbox.height + 2 * padding
        ].join(' ');


        const topSvg = d3.select("#diagram");
        topSvg.attr('viewBox', viewBox);
        /*************************************/

    </script>
</body>

</html>